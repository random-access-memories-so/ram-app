(this["webpackJsonpram-app"]=this["webpackJsonpram-app"]||[]).push([[0],{216:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return g})),n.d(e,"b",(function(){return A}));var i=n(1),r=n.n(i),a=n(8),c=n(4),s=n(3),o=n(13),u=n(106),d=n(33),l=n.n(d);u.BinaryReader.prototype.readPubkey=function(){var t=this.readFixedArray(32);return new o.c(t)},u.BinaryWriter.prototype.writePubkey=function(t){this.writeFixedArray(t.toBuffer())},u.BinaryReader.prototype.readPubkeyAsString=function(){var t=this.readFixedArray(32);return l.a.encode(t)},u.BinaryWriter.prototype.writePubkeyAsString=function(t){this.writeFixedArray(l.a.decode(t))};var h,p,j=new o.c("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s"),b="metadata",f="edition";!function(t){t[t.Uninitialized=0]="Uninitialized",t[t.MetadataV1=4]="MetadataV1",t[t.EditionV1=1]="EditionV1",t[t.MasterEditionV1=2]="MasterEditionV1",t[t.MasterEditionV2=6]="MasterEditionV2",t[t.EditionMarker=7]="EditionMarker"}(h||(h={})),function(t){t.Audio="audio",t.Video="video",t.Image="image",t.VR="vr"}(p||(p={}));var m=function(){function t(e){Object(s.a)(this,t),this.key=void 0,this.ledger=void 0,this.key=h.EditionMarker,this.ledger=e.ledger}return Object(c.a)(t,[{key:"editionTaken",value:function(t){var e=t%248,n=Math.floor(e/8);if(n>30)throw Error("bad index for edition");var i=7-e%8,r=Math.pow(2,i);return 0!==(this.ledger[n]&r)}}]),t}(),O=function t(e){Object(s.a)(this,t),this.address=void 0,this.verified=void 0,this.share=void 0,this.address=e.address,this.verified=e.verified,this.share=e.share},y=function t(e){Object(s.a)(this,t),this.name=void 0,this.symbol=void 0,this.uri=void 0,this.sellerFeeBasisPoints=void 0,this.creators=void 0,this.name=e.name,this.symbol=e.symbol,this.uri=e.uri,this.sellerFeeBasisPoints=e.sellerFeeBasisPoints,this.creators=e.creators},x=function(){function t(e){Object(s.a)(this,t),this.key=void 0,this.updateAuthority=void 0,this.mint=void 0,this.data=void 0,this.primarySaleHappened=void 0,this.isMutable=void 0,this.editionNonce=void 0,this.masterEdition=void 0,this.edition=void 0,this.key=h.MetadataV1,this.updateAuthority=e.updateAuthority,this.mint=e.mint,this.data=e.data,this.primarySaleHappened=e.primarySaleHappened,this.isMutable=e.isMutable,this.editionNonce=e.editionNonce}return Object(c.a)(t,[{key:"init",value:function(){var t=Object(a.a)(r.a.mark((function t(){var e;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M(this.mint);case 2:e=t.sent,this.edition=e,this.masterEdition=e;case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),t}(),v=new Map([[function t(e){Object(s.a)(this,t),this.instruction=0,this.data=void 0,this.isMutable=void 0,this.data=e.data,this.isMutable=e.isMutable},{kind:"struct",fields:[["instruction","u8"],["data",y],["isMutable","u8"]]}],[function t(e){Object(s.a)(this,t),this.instruction=1,this.data=void 0,this.updateAuthority=void 0,this.primarySaleHappened=void 0,this.data=e.data?e.data:null,this.updateAuthority=e.updateAuthority?e.updateAuthority:null,this.primarySaleHappened=e.primarySaleHappened},{kind:"struct",fields:[["instruction","u8"],["data",{kind:"option",type:y}],["updateAuthority",{kind:"option",type:"pubkeyAsString"}],["primarySaleHappened",{kind:"option",type:"u8"}]]}],[function t(e){Object(s.a)(this,t),this.instruction=10,this.maxSupply=void 0,this.maxSupply=e.maxSupply},{kind:"struct",fields:[["instruction","u8"],["maxSupply",{kind:"option",type:"u64"}]]}],[function t(e){Object(s.a)(this,t),this.instruction=9,this.supply=void 0,this.supply=e.supply},{kind:"struct",fields:[["instruction","u8"],["supply","u64"]]}],[function t(e){Object(s.a)(this,t),this.key=void 0,this.supply=void 0,this.maxSupply=void 0,this.printingMint=void 0,this.oneTimePrintingAuthorizationMint=void 0,this.key=h.MasterEditionV1,this.supply=e.supply,this.maxSupply=e.maxSupply,this.printingMint=e.printingMint,this.oneTimePrintingAuthorizationMint=e.oneTimePrintingAuthorizationMint},{kind:"struct",fields:[["key","u8"],["supply","u64"],["maxSupply",{kind:"option",type:"u64"}],["printingMint","pubkeyAsString"],["oneTimePrintingAuthorizationMint","pubkeyAsString"]]}],[function t(e){Object(s.a)(this,t),this.key=void 0,this.supply=void 0,this.maxSupply=void 0,this.key=h.MasterEditionV2,this.supply=e.supply,this.maxSupply=e.maxSupply},{kind:"struct",fields:[["key","u8"],["supply","u64"],["maxSupply",{kind:"option",type:"u64"}]]}],[function t(e){Object(s.a)(this,t),this.key=void 0,this.parent=void 0,this.edition=void 0,this.key=h.EditionV1,this.parent=e.parent,this.edition=e.edition},{kind:"struct",fields:[["key","u8"],["parent","pubkeyAsString"],["edition","u64"]]}],[y,{kind:"struct",fields:[["name","string"],["symbol","string"],["uri","string"],["sellerFeeBasisPoints","u16"],["creators",{kind:"option",type:[O]}]]}],[O,{kind:"struct",fields:[["address","pubkeyAsString"],["verified","u8"],["share","u8"]]}],[x,{kind:"struct",fields:[["key","u8"],["updateAuthority","pubkeyAsString"],["mint","pubkeyAsString"],["data",y],["primarySaleHappened","u8"],["isMutable","u8"]]}],[m,{kind:"struct",fields:[["key","u8"],["ledger",[31]]]}]]),k=new RegExp("\0","g"),g=function(t){var e=Object(u.deserializeUnchecked)(v,x,t);return e.data.name=e.data.name.replace(k,""),e.data.uri=e.data.uri.replace(k,""),e.data.symbol=e.data.symbol.replace(k,""),e};function M(t){return w.apply(this,arguments)}function w(){return(w=Object(a.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.c.findProgramAddress([t.from(b),j.toBuffer(),new o.c(n).toBuffer(),t.from(f)],j);case 2:return e.abrupt("return",e.sent[0].toBase58());case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(t){return S.apply(this,arguments)}function S(){return(S=Object(a.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.c.findProgramAddress([t.from(b),j.toBuffer(),n.toBuffer()],j);case 2:return e.abrupt("return",e.sent[0]);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}).call(this,n(17).Buffer)},353:function(t,e,n){},354:function(t,e,n){},355:function(t,e){},358:function(t,e){},377:function(t,e){},378:function(t,e){},443:function(t,e){},445:function(t,e){},459:function(t,e){},463:function(t,e){},465:function(t,e){},475:function(t,e){},477:function(t,e){},508:function(t,e){},510:function(t,e){},517:function(t,e){},518:function(t,e){},542:function(t,e){},544:function(t,e){},552:function(t,e){},554:function(t,e,n){"use strict";n.r(e);var i=n(0),r=n.n(i),a=n(31),c=n.n(a),s=(n(353),n(354),n(335)),o=n(604),u=n(605),d=n(9),l=n(85),h=n(42),p=n(107),j=n(13),b=n(156),f=n(590),m=n(591),O=n(15),y=function(){var t=Object(h.d)().wallet;return Object(O.jsxs)(f.a,{style:{display:"flex"},children:[Object(O.jsx)("div",{style:{flexGrow:1},children:Object(O.jsx)("img",{src:"ram-logo.png",alt:"RAM logo",style:{maxWidth:150}})}),Object(O.jsx)(l.c,{}),t&&Object(O.jsx)(l.b,{startIcon:Object(O.jsx)(m.a,{}),style:{marginLeft:8}})]})},x=function(t){var e=t.children,n=d.e.Mainnet,r=Object(i.useMemo)((function(){return Object(j.h)(n)}),[n]),a=Object(i.useMemo)((function(){return[Object(p.b)(),Object(p.c)(),Object(p.e)({network:n}),Object(p.d)({network:n}),Object(p.a)()]}),[n]),c=Object(b.b)().enqueueSnackbar,s=Object(i.useCallback)((function(t){c(t.message?"".concat(t.name,": ").concat(t.message):t.name,{variant:"error"}),console.error(t)}),[c]);return Object(O.jsx)(h.a,{endpoint:r,children:Object(O.jsx)(h.b,{wallets:a,onError:s,autoConnect:!0,children:Object(O.jsxs)(l.a,{children:[Object(O.jsx)(y,{}),e]})})})},v=n(603),k=n(159),g=n(26),M=n(25),w=n(14),A=n(1),S=n.n(A),B=n(8),C=n(606),E=n(602),P=n(578),F=n(330),V=n(75),R=n.n(V),T=n(24),U=n(86),H=n(608),I=n(592),z=n(584),N=n(583),W=n(585),D=n(586),q=n(580),L=n(589),J=n(595),K=n(123),G=n(593),Y=n(594),Z=(n(309),new Map([["RAM Mixtape 1.1","DNKyZ"],["RAM Mixtape 1.2","DNdoN"]])),Q=function(t){var e=t.mixtape,n=Object(i.useState)(),r=Object(M.a)(n,2),a=r[0],c=r[1];Object(i.useEffect)((function(){function t(){return(t=Object(B.a)(S.a.mark((function t(){var n;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e.data.uri);case 2:return t.next=4,t.sent.json();case 4:n=t.sent,c(n);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e]);var s=Object(i.useMemo)((function(){return Z.get(e.data.name)}),[e]),o=Object(i.useMemo)((function(){var t,e=null===a||void 0===a||null===(t=a.properties.files)||void 0===t?void 0:t.find((function(t){return"string"!==typeof t&&"glb"===t.type}));return"string"!==typeof e&&(null===e||void 0===e?void 0:e.uri)}),[a]);return Object(O.jsxs)("div",{children:[Object(O.jsx)("model-viewer",{src:o,"auto-rotate":!0,"camera-controls":!0,"rotation-per-second":"30deg",style:{minHeight:"40vh",width:"100%",margin:"auto"}}),Object(O.jsx)("div",{children:Object(O.jsx)("div",{className:"video-wrapper",children:Object(O.jsx)("iframe",{title:"player",src:"https://audius.co/embed/playlist/".concat(s,"?flavor=card"),allow:"encrypted-media",style:{border:"none"}})})})]})},X=function(t){var e=t.mixtape,n=Object(U.a)(t,["mixtape"]),r=Object(i.useState)(!0),a=Object(M.a)(r,2),c=a[0],s=a[1];return Object(O.jsxs)(H.a,Object(T.a)(Object(T.a)({fullScreen:!0},n),{},{open:c,children:[Object(O.jsx)(I.a,{children:Object(O.jsx)(z.a,{onClick:function(){return s(!1)},children:Object(O.jsx)(G.a,{})})}),Object(O.jsx)(Q,{mixtape:e})]}))},_=function(t){var e=t.mixtapes,n=Object(U.a)(t,["mixtapes"]),r=Object(i.useState)(!0),a=Object(M.a)(r,2),c=a[0],s=a[1],o=Object(V.useModal)().showModal;return Object(O.jsxs)(H.a,Object(T.a)(Object(T.a)({},n),{},{open:c,onClose:function(){return s(!1)},fullWidth:!0,children:[Object(O.jsx)(I.a,{children:Object(O.jsx)(z.a,{onClick:function(){return s(!1)},children:Object(O.jsx)(G.a,{})})}),Object(O.jsx)(N.a,{children:"Pick a mixtape"}),Object(O.jsx)(C.a,{m:1,children:Object(O.jsx)(W.a,{children:e.length>0?Object(O.jsx)(D.a,{children:e.map((function(t){return Object(O.jsxs)(q.a,{button:!0,onClick:function(){o(X,{mixtape:t})},children:[Object(O.jsx)(L.a,{children:Object(O.jsx)(Y.a,{})}),Object(O.jsx)(J.a,{primary:t.data.name})]})}))}):Object(O.jsx)(K.a,{children:"You don't have any mixtape :("})})})]}))},$=n(596),tt=n(597),et=n(598),nt=n(609),it=n(600),rt=n(610),at=n(599),ct=n(332),st=n.n(ct),ot=n(601),ut="EUDr68zDWdEwrrW2UUYCBFaiHVqhr47bEZQtTTX8A1e5,7cjk3UmJaNjd6TZBjwna1UmwfKJqKccrDLqg4BTfLGXe".split(","),dt=function(t){var e;return null!==(e=t.data.creators&&t.data.creators.length>0&&ut.includes(t.data.creators[0].address))&&void 0!==e&&e},lt=function(t){return Object(O.jsx)("model-viewer",{src:t.src,"auto-rotate":!0,"rotation-per-second":"30deg","camera-controls":!0,style:{height:"25vh",width:"100%"}})},ht=function(t){var e=t.modelUri,n=(Object(U.a)(t,["modelUri"]),Object(i.useState)(!0)),r=Object(M.a)(n,2),a=r[0],c=r[1];return Object(O.jsxs)(H.a,{open:a,onClose:function(){return c(!1)},children:[Object(O.jsx)(I.a,{children:Object(O.jsx)(z.a,{onClick:function(){return c(!1)},children:Object(O.jsx)(G.a,{})})}),Object(O.jsx)(C.a,{m:4,children:Object(O.jsx)(st.a,{value:"".concat(window.location.href,"ar/").concat(btoa(e)),size:512,renderAs:"canvas"})}),Object(O.jsx)(W.a,{children:Object(O.jsx)(K.a,{children:"Scan with mobile to view your NFT in AR"})})]})},pt=function(t){var e,n=t.metadata,r=t.openCassettePicker,a=Object(i.useState)(),c=Object(M.a)(a,2),s=c[0],o=c[1],u=Object(V.useModal)().showModal;Object(i.useEffect)((function(){function t(){return(t=Object(B.a)(S.a.mark((function t(){var e;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(n.data.uri);case 2:return t.next=4,t.sent.json();case 4:e=t.sent,o(e);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[n]);var d=Object(i.useMemo)((function(){var t,e=null===s||void 0===s||null===(t=s.properties.files)||void 0===t?void 0:t.find((function(t){return"string"!==typeof t&&"glb"===t.type}));return"string"!==typeof e&&(null===e||void 0===e?void 0:e.uri)}),[s]);return Object(O.jsxs)($.a,{variant:"outlined",style:{height:"100%",display:"flex",justifyContent:"flex-between",flexDirection:"column"},children:[Object(O.jsxs)(tt.a,{style:{flexGrow:1},children:[d?Object(O.jsx)(lt,{src:d}):s?Object(O.jsx)(et.a,{component:"img",style:{width:"auto",height:"25vh",margin:"auto"},src:null===s||void 0===s?void 0:s.image}):Object(O.jsx)(at.a,{variant:"rect",style:{height:"30vh"}}),Object(O.jsxs)("div",{children:[Object(O.jsx)(K.a,{variant:"h5",children:n.data.name}),Object(O.jsx)(K.a,{children:null===s||void 0===s?void 0:s.description}),Object(O.jsx)(C.a,{m:1,children:null===s||void 0===s||null===(e=s.attributes)||void 0===e?void 0:e.map((function(t){return Object(O.jsx)(C.a,{m:1,display:"inline-block",children:Object(O.jsx)(nt.a,{component:"div",style:{height:"100%"},label:Object(O.jsxs)(C.a,{m:1,children:[Object(O.jsx)(K.a,{children:t.trait_type}),Object(O.jsx)(K.a,{color:"textSecondary",children:t.value})]})})})}))})]})]}),Object(O.jsx)(it.a,{children:d&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(rt.a,{title:"View on mobile",children:Object(O.jsx)(z.a,{onClick:function(){return u(ht,{modelUri:d})},children:Object(O.jsx)(ot.a,{})})}),dt(n)&&n.data.name.startsWith("Model")&&Object(O.jsx)(P.a,{variant:"outlined",endIcon:Object(O.jsx)(Y.a,{}),onClick:r,children:"Play mixtape"})]})})]})},jt=n(216),bt=function(){var t=Object(B.a)(S.a.mark((function t(e,n){var i;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getParsedTokenAccountsByOwner(n,{programId:F.a});case 2:return i=t.sent.value,console.log(i),t.abrupt("return",i.map((function(t){var e=t.account.data.parsed.info;if(1===e.tokenAmount.uiAmount&&0===e.tokenAmount.decimals)return new j.c(e.mint)})).filter(Boolean));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),ft=function(){var t=Object(B.a)(S.a.mark((function t(e,n){var i,r,a,c,s,o;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(n.map((function(t){return Object(jt.b)(t)})));case 2:return i=t.sent,t.next=5,e.getMultipleAccountsInfo(i);case 5:r=t.sent,a=[],c=Object(w.a)(r);try{for(c.s();!(s=c.n()).done;)(o=s.value)&&a.push(Object(jt.a)(o.data))}catch(u){c.e(u)}finally{c.f()}return t.abrupt("return",a);case 10:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),mt=function(t){var e,n=[],i=[],r=[],a=Object(w.a)(t);try{for(a.s();!(e=a.n()).done;){var c=e.value;dt(c)?c.data.name.startsWith("Model")?n.push(c):i.push(c):r.push(c)}}catch(s){a.e(s)}finally{a.f()}return n.sort((function(t,e){return t.data.name.localeCompare(e.data.name)})),i.sort((function(t,e){return t.data.name.localeCompare(e.data.name)})),{blockjams:n,otherRAM:i,other:r}},Ot=function(){var t=Object(h.c)().connection,e=Object(h.d)(),n=e.connected,r=e.publicKey,a=Object(l.d)().setOpen,c=Object(V.useModal)().showModal,s=Object(i.useState)(),o=Object(M.a)(s,2),u=o[0],d=o[1];Object(i.useEffect)((function(){d(void 0),n&&r&&bt(t,r).then((function(e){return ft(t,e)})).then(mt).then(d)}),[t,n,r]);var p=Object(i.useMemo)((function(){if(u)return[].concat(Object(g.a)(u.blockjams),Object(g.a)(u.otherRAM),Object(g.a)(u.other))}),[u]),j=Object(i.useMemo)((function(){return u?u.otherRAM.filter((function(t){return t.data.name.toLowerCase().includes("mixtape")})):[]}),[u]);return Object(O.jsx)(C.a,{m:2,children:Object(O.jsx)(E.a,{container:!0,justifyContent:"center",alignItems:"stretch",direction:"row",spacing:3,children:n?null===p||void 0===p?void 0:p.map((function(t){return Object(O.jsx)(E.a,{item:!0,xs:6,lg:4,xl:3,children:Object(O.jsx)(pt,{metadata:t,openCassettePicker:function(){return c(_,{mixtapes:j})}})})})):Object(O.jsx)(E.a,{item:!0,style:{height:"80vh"},children:Object(O.jsx)(C.a,{height:"100%",display:"flex",justifyContent:"center",flexDirection:"column",children:Object(O.jsx)(P.a,{variant:"outlined",onClick:function(){return a(!0)},children:"Connect wallet to play"})})})})})},yt=n(208),xt=n(38),vt=function(){var t=Object(xt.e)().base64modelUri,e=Object(i.useRef)(null);Object(i.useEffect)((function(){setInterval((function(){e.current&&(e.current.scale="0.01 0.01 0.01",e.current.updateFraming())}),5e3)}));var n=Object(i.useMemo)((function(){return atob(t)}),[t]);return Object(O.jsx)("model-viewer",{ref:e,src:n,"auto-rotate":!0,"camera-controls":!0,"rotation-per-second":"30deg",ar:!0,"ar-modes":"webxr quick-look",style:{minHeight:400},"xr-environment":!0})},kt=Object(s.a)({palette:{type:"dark",primary:{main:v.a[700]},background:{default:k.a[900]}},overrides:{MuiButtonBase:{root:{justifyContent:"flex-start"}},MuiButton:{root:{textTransform:void 0,padding:"12px 16px"},startIcon:{marginRight:8},endIcon:{marginLeft:8}}}}),gt=function(){return Object(O.jsx)(o.a,{theme:kt,children:Object(O.jsxs)(R.a,{beta:!0,children:[Object(O.jsx)(u.a,{}),Object(O.jsx)(b.a,{children:Object(O.jsxs)(yt.a,{children:[Object(O.jsx)(xt.a,{path:"/",children:Object(O.jsx)(x,{children:Object(O.jsx)(Ot,{})})}),Object(O.jsx)(xt.a,{path:"/ar/:base64modelUri",children:Object(O.jsx)(vt,{})})]})})]})})},Mt=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,612)).then((function(e){var n=e.getCLS,i=e.getFID,r=e.getFCP,a=e.getLCP,c=e.getTTFB;n(t),i(t),r(t),a(t),c(t)}))};c.a.render(Object(O.jsx)(r.a.StrictMode,{children:Object(O.jsx)(gt,{})}),document.getElementById("root")),Mt()}},[[554,1,2]]]);
//# sourceMappingURL=main.57ca476a.chunk.js.map